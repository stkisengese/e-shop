<h1>Your Cart</h1>

<% if @cart.line_items.any? %>
  <% @cart.line_items.each do |item| %>
    <div>
      <h3><%= item.product.title %></h3>
      <p>Quantity: <%= item.quantity %></p>
      <p>Price: <%= number_to_currency(item.product.price * item.quantity) %></p>
      <%= button_to 'Remove', remove_item_cart_path(product_id: item.product.id), method: :delete %>
    </div>
  <% end %>

  <p>Total: <%= number_to_currency(@cart.total_price) %></p>
  <%= button_to 'Empty Cart', cart_path, method: :delete, data: { confirm: 'Are you sure?' } %>
  <%= link_to 'Continue Shopping', root_path %>
<% else %>
  <p>Your cart is empty.</p>


<%
=begin%>
 <!-- app/views/carts/show.html.erb -->
<article>
  <h1>Your Cart</h1>

  <% if @cart.line_items.any? %>
    <table>
      <thead>
        <tr>
          <th>Product</th>
          <th>Quantity</th>
          <th>Price</th>
          <th>Total</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% @cart.line_items.each do |item| %>
          <tr>
            <td>
              <% if item.product.image.attached? %>
                <%= image_tag item.product.image, size: '50x50' %>
              <% end %>
              <%= item.product.title %>
            </td>
            <td><%= item.quantity %></td>
            <td>$<%= number_with_precision(item.product.price, precision: 2) %></td>
            <td>$<%= number_with_precision(item.total_price, precision: 2) %></td>
            <td>
              <%= button_to 'Remove', line_item_path(item), 
                  method: :delete, 
                  data: { confirm: 'Are you sure?' } %>
            </td>
          </tr>
        <% end %>
      </tbody>
      <tfoot>
        <tr>
          <td colspan="3"><strong>Total:</strong></td>
          <td>$<%= number_with_precision(@cart.total_price, precision: 2) %></td>
          <td></td>
        </tr>
      </tfoot>
    </table>

    <%= button_to 'Empty Cart', cart_path(@cart), 
        method: :delete, 
        data: { confirm: 'Are you sure?' } %>
  <% else %>
    <p>Your cart is empty</p>
  <% end %>

  <%= link_to 'Continue Shopping', products_path %>
</article> 
<%
=end%>

<% end %>